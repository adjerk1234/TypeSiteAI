<!DOCTYPE html>
<html lang="en">
<%- include('partials/_head.ejs') %>
<body>
  <%- include('partials/_header.ejs') %>
  <main role="main" class="container mt-4">
    <h1>Profile</h1>
    <p>Email: <%= user.email %></p>
    <% if (typeof message !== 'undefined' && message) { %>
      <div class="alert alert-success" role="alert">
        <%= message %>
      </div>
    <% } %>
    <% if (typeof error !== 'undefined' && error) { %>
      <div class="alert alert-danger" role="alert">
        <%= error %>
      </div>
    <% } %>
    <form action="/profile" method="POST">
      <div class="mb-3">
        <label for="openaiApiKey" class="form-label">OpenAI API Key</label>
        <input type="password" class="form-control" id="openaiApiKey" name="openaiApiKey" value="<%= user.openaiApiKey ? '*'.repeat(32) : '' %>" required>
      </div>
      <button type="submit" class="btn btn-primary">Update API Key</button>
    </form>
  </main>
  <%- include('partials/_footer.ejs') %>
</body>
</html>